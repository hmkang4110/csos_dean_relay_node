# ==============================================================================
# 1. 시스템 및 IPC 설정 (System & IPC)
#    - 멀티코어 통신(IPC) 및 메모리/스택 할당
# ==============================================================================
CONFIG_IPC_SERVICE=y
CONFIG_MBOX=y

CONFIG_HEAP_MEM_POOL_SIZE=8192
CONFIG_MAIN_STACK_SIZE=512
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=512

# 부트로더 및 이미지 관리
CONFIG_BOOTLOADER_MCUBOOT=n
CONFIG_PM_SINGLE_IMAGE=y

# ==============================================================================
# 2. Bluetooth 기본 및 HCI 설정 (Bluetooth Basics & HCI)
#    - HCI RAW 관련 설정은 링커 에러와 밀접한 관련이 있음
# ==============================================================================
CONFIG_BT=y
CONFIG_BT_MAX_CONN=19

# [HCI RAW 설정]
CONFIG_BT_HCI_RAW=y
CONFIG_BT_HCI_RAW_H4=n

# ==============================================================================
# 3. 컨트롤러 아키텍처 및 기능 (Controller Architecture)
#    - Link Layer 분리 및 역할 설정
# ==============================================================================
CONFIG_BT_CTLR=y
CONFIG_BT_LL_SOFTDEVICE=y
# CONFIG_BT_LL_SW_SPLIT=y

CONFIG_BT_BROADCASTER=y
CONFIG_BT_OBSERVER=y

# ==============================================================================
# 4. 확장 기능 및 PHY (Extended Adv & PHY)
#    - Multi-Advertising 및 통신 속도/거리 설정
# ==============================================================================
# Extended Advertising (멀티 광고 필수)
CONFIG_BT_CTLR_ADV_EXT=y
CONFIG_BT_CTLR_ADV_AUX_SET=10

# PHY 설정 (2Mbps, Coded PHY)
CONFIG_BT_CTLR_PHY_2M=y
CONFIG_BT_CTLR_PHY_CODED=y

# ==============================================================================
# 5. FEM 및 TX Power 제어 (FEM & TX Power)
#    - nRF21540 등 프론트엔드 모듈 및 출력 세기 제어
# ==============================================================================
CONFIG_MPSL=y
CONFIG_MPSL_FEM=y
CONFIG_MPSL_FEM_NRF21540_GPIO=y

# HCI TX power 명령 지원 (필수: 이 기능이 켜져야 앱 코어에서 파워 조절 가능)
CONFIG_BT_CTLR_TX_PWR_DYNAMIC_CONTROL=y      

# 현실적인 보정치 (Gain)
CONFIG_MPSL_FEM_NRF21540_TX_GAIN_DB=11
CONFIG_MPSL_FEM_NRF21540_TX_GAIN_DB_POUTA=11
CONFIG_MPSL_FEM_NRF21540_TX_GAIN_DB_POUTB=11

# ==============================================================================
# 6. 버퍼 및 메모리 할당 (Buffers)
#    - 데이터 처리량 및 흐름 제어
# ==============================================================================
# Workaround: Host number of completed commands flow control issue
CONFIG_BT_BUF_CMD_TX_COUNT=10
CONFIG_BT_BUF_CMD_TX_SIZE=255

# RX/TX 데이터 버퍼
# Enable and adjust as necessary
# CONFIG_BT_BUF_EVT_RX_COUNT=16
CONFIG_BT_BUF_EVT_RX_SIZE=255
CONFIG_BT_BUF_ACL_RX_SIZE=255
CONFIG_BT_BUF_ACL_TX_SIZE=251

# ==============================================================================
# 7. 로깅 및 디버깅 (Logging)
#    - RTT를 통한 로그 출력
# ==============================================================================
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_BACKEND_RTT=y

# MPSL/FEM 로그 레벨
# CONFIG_MPSL_LOG_LEVEL_INF=y
CONFIG_MPSL_FEM_LOG_LEVEL_DBG=y
CONFIG_MPSL_LOG_LEVEL_DBG=y